<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#090a0f">
    <title>Gesture Controlled 3D Particles</title>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="loading">
        <div class="loader"></div>
        <div class="loading-text">Initializing Hand Tracking</div>
        <div class="loading-sub">Please allow camera access</div>
    </div>

    <button id="ui-toggle" class="ui-toggle-btn" aria-label="Toggle UI Panel">
        <span class="toggle-icon">âš™ï¸</span>
    </button>

    <div id="ui-container">
        <div class="header">
            <div class="header-icon">âœ¨</div>
            <div>
                <h1>Particle Controller</h1>
                <div class="subtitle">Gesture-powered 3D system</div>
            </div>
        </div>
        
        <label>Select Template</label>
        <div class="grid-buttons">
            <button class="shape-btn active" data-shape="heart">
                <span class="icon">ğŸ’–</span>
                Heart
            </button>
            <button class="shape-btn" data-shape="flower">
                <span class="icon">ğŸŒ¸</span>
                Flower
            </button>
            <button class="shape-btn" data-shape="saturn">
                <span class="icon">ğŸª</span>
                Saturn
            </button>
            <button class="shape-btn" data-shape="buddha">
                <span class="icon">ğŸ§˜</span>
                Statue
            </button>
            <button class="shape-btn" data-shape="fireworks">
                <span class="icon">ğŸ†</span>
                Fireworks
            </button>
            <button class="shape-btn" data-shape="sphere">
                <span class="icon">âšª</span>
                Sphere
            </button>
        </div>

        <label>Particle Color</label>
        <div class="color-grid" id="colorGrid">
            <button class="color-btn active" data-color="#00d4ff" style="background:#00d4ff" title="Cyan"></button>
            <button class="color-btn" data-color="#3a86ff" style="background:#3a86ff" title="Blue"></button>
            <button class="color-btn" data-color="#8338ec" style="background:#8338ec" title="Purple"></button>
            <button class="color-btn" data-color="#ff006e" style="background:#ff006e" title="Hot Pink"></button>
            <button class="color-btn" data-color="#fb5607" style="background:#fb5607" title="Orange"></button>
            <button class="color-btn" data-color="#ffbe0b" style="background:#ffbe0b" title="Gold"></button>
            <button class="color-btn" data-color="#06ffa5" style="background:#06ffa5" title="Mint"></button>
            <button class="color-btn" data-color="#00ff88" style="background:#00ff88" title="Green"></button>
            <button class="color-btn" data-color="#ff1744" style="background:#ff1744" title="Red"></button>
            <button class="color-btn" data-color="#ff6b9d" style="background:#ff6b9d" title="Rose"></button>
            <button class="color-btn" data-color="#ffd93d" style="background:#ffd93d" title="Yellow"></button>
            <button class="color-btn" data-color="#ff9ff3" style="background:#ff9ff3" title="Pink"></button>
            <button class="color-btn" data-color="#54a0ff" style="background:#54a0ff" title="Sky Blue"></button>
            <button class="color-btn" data-color="#5f27cd" style="background:#5f27cd" title="Deep Purple"></button>
            <button class="color-btn" data-color="#00d2d3" style="background:#00d2d3" title="Turquoise"></button>
            <button class="color-btn" data-color="#ff6348" style="background:#ff6348" title="Coral"></button>
            <button class="color-btn" data-color="#ffa502" style="background:#ffa502" title="Amber"></button>
            <button class="color-btn" data-color="#2ed573" style="background:#2ed573" title="Emerald"></button>
            <button class="color-btn" data-color="#ffffff" style="background:#ffffff" title="White"></button>
            <button class="color-btn" data-color="#ff0080" style="background:#ff0080" title="Magenta"></button>
        </div>
        <div class="color-picker-row">
            <input type="color" id="colorPicker" value="#00d4ff" class="color-picker-input">
            <span class="color-value-display" id="colorValue">#00d4ff</span>
        </div>

        <div class="gradient-toggle-wrapper">
            <label class="gradient-toggle">
                <input type="checkbox" id="gradientToggle">
                <span class="gradient-toggle-slider"></span>
                <span class="gradient-toggle-label">Dynamic Gradient</span>
            </label>
        </div>

        <div class="gradient-controls" id="gradientControls" style="display: none;">
            <label>Gradient Type</label>
            <div class="mode-toggle">
                <button class="gradient-mode-btn active" data-gradient-mode="radial">
                    ğŸ¯ Radial
                </button>
                <button class="gradient-mode-btn" data-gradient-mode="depth">
                    ğŸŒŠ Depth
                </button>
                <button class="gradient-mode-btn" data-gradient-mode="velocity">
                    âš¡ Velocity
                </button>
            </div>
        </div>

        <label>Gesture Mode</label>
        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="scale">
                ğŸ“ Scale
            </button>
            <button class="mode-btn" data-mode="rotate">
                ğŸ”„ Rotate
            </button>
            <button class="mode-btn" data-mode="both">
                âš¡ Both
            </button>
        </div>

        <div id="hand-status">
            <span class="status-dot"></span>
            <span id="status-text">Waiting for hands...</span>
        </div>
        
        <div class="indicator-group">
            <div class="indicator-row">
                <span class="indicator-label">Scale</span>
                <div class="indicator-bar">
                    <div class="indicator-fill" id="scale-bar"></div>
                </div>
            </div>
            <div class="indicator-row">
                <span class="indicator-label">Rot X</span>
                <div class="indicator-bar">
                    <div class="indicator-fill" id="rotation-x-bar"></div>
                </div>
            </div>
            <div class="indicator-row">
                <span class="indicator-label">Rot Y</span>
                <div class="indicator-bar">
                    <div class="indicator-fill" id="rotation-y-bar"></div>
                </div>
            </div>
        </div>

        <label style="margin-top: 20px;">Rotation Preview</label>
        <div class="rotation-viz">
            <div class="axis-indicator x-axis" id="x-axis-viz" title="X-Axis Rotation (Up/Down Tilt)">
                <span class="axis-label">X</span>
                <span class="axis-description">Up/Down</span>
            </div>
            <div class="axis-indicator y-axis" id="y-axis-viz" title="Y-Axis Rotation (Left/Right Turn)">
                <span class="axis-label">Y</span>
                <span class="axis-description">Left/Right</span>
            </div>
        </div>
    </div>

    <div class="instructions">
        <div class="instructions-row">
            <span>âœ‹â†”ï¸âœ‹ Hands apart = Expand</span>
            <span>ğŸ¤ Pinch = Compress</span>
        </div>
        <div class="instructions-row">
            <span>ğŸ–ï¸â†•ï¸ Tilt hand = Rotate X</span>
            <span>ğŸ–ï¸â†”ï¸ Tilt hand = Rotate Y</span>
        </div>
        <div class="instructions-row">
            <span>âœŠ Fist = Lock rotation</span>
        </div>
    </div>

    <div id="camera-preview">
        <canvas id="preview-canvas"></canvas>
    </div>

    <video class="input_video"></video>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Three.js Post-Processing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <!-- MediaPipe -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <!-- Application Modules -->
    <script type="module" src="js/main.js"></script>

</body>
</html>

